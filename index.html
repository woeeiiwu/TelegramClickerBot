import logging
from aiogram import Bot, Dispatcher, types
from aiogram.filters import Command
from aiogram.fsm.storage.memory import MemoryStorage
import asyncio

# Токен вашего бота
API_TOKEN = '7846958905:AAG0TYKsWhsja25sXRj0suDJYzo1rAhiD1U'

# Настройка логирования
logging.basicConfig(level=logging.INFO)

# Инициализация бота и диспетчера
bot = Bot(token=API_TOKEN)
dp = Dispatcher(storage=MemoryStorage())

# Обработка команды /start
@dp.message(Command("start"))
async def send_welcome(message: types.Message):
    # Кнопка с Web App
    web_app_button = types.InlineKeyboardButton(
        text="Нажимать своей кошачей лапкой", 
        web_app=types.WebAppInfo(url="https://woeeiiwu.github.io/TelegramClickerBot/")  # Укажите URL вашего веб-приложения
    )
    
    # Создание клавиатуры с кнопкой
    keyboard = types.InlineKeyboardMarkup(inline_keyboard=[[web_app_button]])
    
    # URL изображения (можете заменить на свой)
    image_url = "https://avatars.mds.yandex.net/i?id=e01f499e47230324fe92d1db456f449a_l-5288660-images-thumbs&n=13"  # Замените на URL вашего изображения

    # Отправка фото с текстом
    await bot.send_photo(chat_id=message.chat.id, photo=image_url, caption="Привет солнышко это короче СпоттиКоин хывпхвызпыв, можешь играть в него, но к сожалению я не могу пока сделать что бы коины сохранялись после выхода, так что это так, прикольчик чисто.", reply_markup=keyboard)

# Главная функция запуска бота
async def main():
    if API_TOKEN == 'YOUR_BOT_API_TOKEN':
        logging.error("Токен бота не установлен. Проверьте переменную API_TOKEN.")
        return

    try:
        await dp.start_polling(bot)
    except Exception as e:
        logging.error(f"Ошибка запуска бота: {e}")

if __name__ == '__main__':
    asyncio.run(main())
